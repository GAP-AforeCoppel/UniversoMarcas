<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Base de Conocimiento de Marcas | GAP</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500&family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <script>
        tailwind.config = { darkMode: 'class' }
    </script>
    <style>
        body { font-family: 'Inter', sans-serif; }
        .font-mono { font-family: 'Fira Code', monospace; }
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: #1d4ed8; border-radius: 10px; }
        .dark ::-webkit-scrollbar-thumb { background: #fbbF24; }
        
        .brand-card { transition: all 0.2s ease-in-out; display: flex; flex-direction: column; height: 100%; }
        .brand-card:hover { transform: translateY(-4px); }
        
        .nav-button.active { background-color: #1d4ed8; color: white; box-shadow: 0 4px 12px rgba(29, 78, 216, 0.3); }
        .dark .nav-button.active { background-color: #fbbF24; color: #111827; box-shadow: 0 4px 12px rgba(251, 191, 36, 0.3); }

        .area-tab.active { background-color: #1d4ed8; color: white; }
        .dark .area-tab.active { background-color: #fbbF24; color: #111827; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .animate-fade { animation: fadeIn 0.3s ease-out forwards; }

        @keyframes pulse-blue { 0% { box-shadow: 0 0 0 0 rgba(29, 78, 216, 0.4); } 70% { box-shadow: 0 0 0 8px rgba(29, 78, 216, 0); } 100% { box-shadow: 0 0 0 0 rgba(29, 78, 216, 0); } }
        @keyframes pulse-amber { 0% { box-shadow: 0 0 0 0 rgba(245, 158, 11, 0.4); } 70% { box-shadow: 0 0 0 8px rgba(245, 158, 11, 0); } 100% { box-shadow: 0 0 0 0 rgba(245, 158, 11, 0); } }
        @keyframes pulse-indigo { 0% { box-shadow: 0 0 0 0 rgba(79, 70, 229, 0.4); } 70% { box-shadow: 0 0 0 8px rgba(79, 70, 229, 0); } 100% { box-shadow: 0 0 0 0 rgba(79, 70, 229, 0); } }
        @keyframes pulse-red { 0% { box-shadow: 0 0 0 0 rgba(220, 38, 38, 0.4); } 70% { box-shadow: 0 0 0 8px rgba(220, 38, 38, 0); } 100% { box-shadow: 0 0 0 0 rgba(220, 38, 38, 0); } }
        
        .pulse-query { animation: pulse-blue 2s infinite; }
        .pulse-proceso { animation: pulse-amber 2s infinite; }
        .pulse-ti { animation: pulse-indigo 2s infinite; }
        .pulse-pdf { animation: pulse-red 2s infinite; }

        .proceso-content h3 { font-weight: 800; font-size: 1.1rem; color: #1e3a8a; margin-top: 1.5rem; margin-bottom: 0.75rem; border-left: 4px solid #f59e0b; padding-left: 0.75rem; }
        .dark .proceso-content h3 { color: #fbbF24; }
        .proceso-content ul { list-style-type: disc; padding-left: 1.5rem; margin-bottom: 1rem; }
        .proceso-content li { margin-bottom: 0.5rem; }
        .proceso-highlight { background: rgba(245, 158, 11, 0.1); border: 1px solid rgba(245, 158, 11, 0.2); padding: 1rem; border-radius: 1rem; margin-top: 1rem; }
        b { font-weight: 700; color: inherit; }
    </style>
</head>
<body class="bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-100 transition-colors duration-300">

    <!-- Modales -->
    <div id="query-modal" class="fixed inset-0 z-[100] hidden items-center justify-center p-4 bg-black/60 backdrop-blur-sm opacity-0 transition-opacity duration-300">
        <div class="bg-white dark:bg-gray-800 w-full max-w-2xl rounded-3xl shadow-2xl overflow-hidden transform scale-95 transition-transform duration-300" id="query-modal-content">
            <div class="p-6 border-b border-gray-100 dark:border-gray-700 flex justify-between items-center text-blue-600">
                <div class="flex items-center gap-3">
                    <div class="p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M4 7v10c0 2.21 3.58 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.58 4 8 4s8-1.79 8-4M4 7c0-2.21 3.58-4 8-4s8 1.79 8 4m0 5c0 2.21-3.58 4-8 4s-8-1.79-8-4"></path></svg></div>
                    <div><h2 class="text-xl font-bold dark:text-white" id="query-title">Query</h2><span id="server-badge" class="text-[10px] font-black bg-blue-600 text-white px-2 py-0.5 rounded uppercase mt-1 inline-block">Servidor: SAFRE</span></div>
                </div>
                <button onclick="closeModal('query-modal')" class="text-gray-400 hover:text-gray-600 dark:hover:text-gray-200"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button>
            </div>
            <div class="p-6 bg-gray-50 dark:bg-gray-900">
                <div class="relative group">
                    <pre class="font-mono text-sm p-6 bg-gray-900 text-green-400 rounded-2xl overflow-x-auto border border-gray-700 shadow-inner max-h-[400px]" id="query-text"></pre>
                    <button id="copy-btn-action" onclick="window.copyToClipboard()" class="absolute top-4 right-4 bg-white/10 hover:bg-white/20 text-white px-4 py-2 rounded-xl text-xs font-bold transition-all border border-white/10 shadow-lg"><span id="copy-btn-text">Copiar Query</span></button>
                </div>
            </div>
        </div>
    </div>

    <div id="proceso-modal" class="fixed inset-0 z-[100] hidden items-center justify-center p-4 bg-black/60 backdrop-blur-sm opacity-0 transition-opacity duration-300">
        <div class="bg-white dark:bg-gray-800 w-full max-w-3xl rounded-3xl shadow-2xl overflow-hidden transform scale-95 transition-transform duration-300" id="proceso-modal-content">
            <div class="p-6 border-b border-amber-100 dark:border-amber-900/30 flex justify-between items-center bg-amber-50/50 dark:bg-amber-900/10">
                <div class="flex items-center gap-3 text-amber-600">
                    <div class="p-2 bg-amber-100 dark:bg-amber-900/30 rounded-lg shadow-inner"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path></svg></div>
                    <h2 class="text-xl font-bold dark:text-white" id="proceso-title">Desarrollo</h2>
                </div>
                <button onclick="closeModal('proceso-modal')" class="text-gray-400 hover:text-gray-600 dark:hover:text-gray-200"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button>
            </div>
            <div class="p-8 max-h-[70vh] overflow-y-auto proceso-content text-gray-700 dark:text-gray-300" id="proceso-text"></div>
        </div>
    </div>

    <div id="ti-modal" class="fixed inset-0 z-[100] hidden items-center justify-center p-4 bg-black/60 backdrop-blur-sm opacity-0 transition-opacity duration-300">
        <div class="bg-white dark:bg-gray-800 w-full max-w-2xl rounded-3xl shadow-2xl overflow-hidden transform scale-95 transition-transform duration-300" id="ti-modal-content">
            <div class="p-6 border-b border-indigo-100 dark:border-indigo-900/30 flex justify-between items-center bg-indigo-50 dark:bg-indigo-900/10">
                <div class="flex items-center gap-3">
                    <div class="p-2 bg-indigo-600 rounded-lg shadow-lg text-white font-black text-xs uppercase">TI</div>
                    <h2 class="text-xl font-bold dark:text-white">Oferta de Ticket</h2>
                </div>
                <button onclick="closeModal('ti-modal')" class="text-gray-400 hover:text-gray-600 dark:hover:text-gray-200"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M6 18L18 6M6 6l12 12"></path></svg></button>
            </div>
            <div class="p-8">
                <div class="mb-6"><h5 class="text-[10px] font-black text-indigo-600 uppercase mb-2">Ticket a levantar:</h5><p class="text-2xl font-black text-gray-900 dark:text-white" id="ti-offer-name"></p></div>
                <div class="p-5 bg-gray-50 dark:bg-gray-900/50 rounded-2xl border border-gray-100 dark:border-gray-700 mb-8"><h5 class="text-[10px] font-black text-gray-400 uppercase mb-3 uppercase">Ruta del Ticket:</h5><p class="text-sm font-bold text-gray-700 dark:text-gray-300 flex flex-wrap items-center gap-2" id="ti-path"></p></div>
                <div class="text-center">
                    <h5 class="text-[10px] font-black text-gray-400 uppercase mb-4">Imagen de Referencia:</h5>
                    <div class="inline-block p-2 bg-white dark:bg-gray-700 rounded-2xl shadow-md border border-gray-100 dark:border-gray-600">
                        <img id="ti-image" src="" alt="Referencia TI" class="rounded-xl max-w-full h-auto max-h-[300px]">
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="pdf-modal" class="fixed inset-0 z-[100] hidden items-center justify-center p-4 bg-black/60 backdrop-blur-sm opacity-0 transition-opacity duration-300">
        <div class="bg-white dark:bg-gray-800 w-full max-w-xl rounded-3xl shadow-2xl overflow-hidden transform scale-95 transition-transform duration-300" id="pdf-modal-content">
            <div class="p-6 border-b border-red-100 dark:border-red-900/30 flex justify-between items-center bg-red-50 dark:bg-red-900/10 text-red-600">
                <div class="flex items-center gap-3">
                    <div class="p-2 bg-red-600 rounded-lg shadow-lg text-white font-black"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"></path></svg></div>
                    <h2 class="text-xl font-bold dark:text-white">Manual PDF</h2>
                </div>
                <button onclick="closeModal('pdf-modal')" class="text-gray-400 hover:text-gray-600 dark:hover:text-gray-200"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button>
            </div>
            <div class="p-10 text-center">
                <div class="w-20 h-20 bg-red-50 dark:bg-red-900/20 rounded-full flex items-center justify-center mx-auto mb-6 text-red-600"><svg class="w-10 h-10" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg></div>
                <h3 class="text-lg font-bold text-gray-900 dark:text-white mb-2" id="pdf-manual-name">Manual</h3>
                <a id="pdf-download-link" href="#" download class="inline-flex items-center gap-2 px-8 py-4 bg-red-600 hover:bg-red-700 text-white font-bold rounded-2xl shadow-xl active:scale-95">Descargar PDF</a>
            </div>
            <div class="p-4 bg-gray-50 dark:bg-gray-900/50 text-center text-[10px] text-gray-400 uppercase font-bold italic">Documento de apoyo interno - Elaborado por UNE/GAP</div>
        </div>
    </div>

    <!-- Login -->
    <div id="gatekeeper" class="fixed inset-0 z-50 bg-gray-100 dark:bg-gray-900 flex flex-col items-center justify-center p-4 transition-opacity duration-500">
        <div class="max-w-md w-full bg-white dark:bg-gray-800 rounded-3xl shadow-2xl p-10 text-center border border-gray-200 dark:border-gray-700">
            <img src="logoafore.png" alt="Logo Afore Coppel" class="h-20 mx-auto mb-8 drop-shadow-sm">
            <h1 class="text-3xl font-bold text-blue-900 dark:text-yellow-400 mb-2 font-black uppercase tracking-tight">Acceso Seguro</h1>
            <p class="text-gray-500 dark:text-gray-400 mb-8 text-sm italic">Ingresa la clave de acceso local</p>
            <input type="password" id="access-key" class="w-full px-6 py-4 bg-gray-50 dark:bg-gray-700 border-none rounded-2xl focus:ring-4 focus:ring-blue-500/20 text-center text-xl tracking-[0.5em] outline-none mb-4" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
            <button id="auth-btn" class="w-full py-4 bg-blue-700 hover:bg-blue-800 text-white font-bold rounded-2xl shadow-xl transition-all active:scale-95 uppercase tracking-widest text-sm">Entrar al Sistema</button>
            <div id="auth-error" class="hidden mt-4 p-3 bg-red-50 text-red-600 rounded-xl text-xs font-bold animate-fade">Clave incorrecta.</div>
        </div>
    </div>

    <!-- Main Content -->
    <div id="app-content" class="hidden opacity-0 transition-opacity duration-700 min-h-screen">
        <nav class="bg-white dark:bg-gray-800 shadow-md py-4 sticky top-0 z-40">
            <div class="max-w-[1920px] mx-auto px-6 flex justify-between items-center">
                <div class="flex items-center gap-4">
                    <img src="logoafore.png" alt="Logo Afore Coppel" class="h-10">
                    <div class="border-l border-gray-300 dark:border-gray-600 h-8"></div>
                    <img src="logogap.png" alt="Logo Gerencia" class="w-16">
                </div>
                <button id="toggle-dark" class="p-2.5 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-700 transition-all"><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20"><path d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0z"></path></svg></button>
            </div>
        </nav>

        <header class="relative text-center bg-cover bg-center shadow-xl overflow-hidden py-24 md:py-48 lg:py-64 mb-10" style="background-image: url('cafe.png'); background-color: #1e3a8a;">
            <div class="absolute inset-0 bg-blue-900 bg-opacity-75"></div>
            <div class="relative z-10 px-6 max-w-5xl mx-auto text-white">
                <h1 class="text-3xl sm:text-5xl font-black dark:text-yellow-300 tracking-tight uppercase">Base de Conocimiento de Marcas</h1>
                <p class="text-lg text-blue-100 mt-2 font-medium italic">Gu√≠a integral dirigida a CAT, MSO y UNE/GAP</p>
            </div>
        </header>

        <div class="max-w-[1920px] mx-auto px-6 pb-20">
            <div class="max-w-5xl mx-auto mb-10 text-center">
                <div class="relative mb-6">
                    <input type="text" id="search-input" class="w-full bg-white dark:bg-gray-800 shadow-xl rounded-2xl py-5 pl-14 pr-4 text-lg focus:ring-4 focus:ring-blue-500/20 outline-none transition-all placeholder:text-gray-400" placeholder="Buscar marcas...">
                    <svg class="w-6 h-6 absolute left-5 top-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
                </div>
                <div id="filters" class="flex flex-wrap justify-center gap-3">
                    <button data-cat="all" class="nav-button active py-2 px-8 rounded-xl bg-white dark:bg-gray-800 shadow font-bold text-xs uppercase transition-all">Todas</button>
                    <button data-cat="OPERATIVA" class="nav-button py-2 px-8 rounded-xl bg-white dark:bg-gray-800 shadow font-bold text-xs uppercase text-red-600 transition-all">Operativas</button>
                    <button data-cat="INFORMATIVA" class="nav-button py-2 px-8 rounded-xl bg-white dark:bg-gray-800 shadow font-bold text-xs uppercase text-green-600 transition-all">Informativas</button>
                </div>
            </div>
            <main id="brands-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-6 items-start"></main>
        </div>
    </div>

    <script>
        // --- BASE DE DATOS LOCAL √çNTEGRA Y COMPLETA ---
        const brandsData = [
            // --- SAFRE ---
            { clave: "120", nombre: "INHABILITACI√ìN POR TRASP.", origen: "SAFRE", tipo: "OPERATIVA", plazo: "Indefinido", descripcion: "Se coloca cuando el trabajador se traspas√≥ a otra Afore.", acciones: { CAT: "Mencionar al trabajador que su cuenta se encuentra inhabilitada derivado de un servicio de traspaso realizado y canalizarlo a su Afore actual.", MSO: "Levantar CRM si presenta una situaci√≥n especial, de lo contrario la marca es correcta.", UNE: "Validar si es correcta la Marca y canalizar al trabajador a su Afore actual." } },
            { clave: "140", nombre: "INHABILITACI√ìN POR RETIRO", origen: "SAFRE", tipo: "OPERATIVA", plazo: "Indefinido", descripcion: "La cuenta se queda en $0 por realizar un Retiro Total.", acciones: { CAT: "Informar al trabajador que su cuenta est√° inhabilitada debido a un servicio de retiro total.", MSO: "En caso de que la cuenta del trabajador cuente con saldos, es necesario solicitar el desmarque mediante un folio CRM.", UNE: "Si la marca es incorrecta, solicitar desmarque con el √°rea de retiros totales." } },
            { clave: "151", nombre: "CUENTA SALDO CERO", origen: "SAFRE", tipo: "OPERATIVA", plazo: "Indefinido", descripcion: "Se apertura la cuenta y no se reciben aportaciones.", acciones: { CAT: "Sondear al trabajador si ha recibido aportaciones patronales posteriores al 1ro de Julio de 1997. En caso de requerir aclaraci√≥n de saldos levantar consulta CRM.", MSO: "Si el asesor indica que el trabajador tiene aportaciones pero no tiene saldo en la cuenta, se debe levantar un CRM. Si se dispone del reporte de semanas cotizadas, se debe anexar al folio.", UNE: "Si no hay saldo disponible, realizar an√°lisis para confirmar procedencia. En caso de ser as√≠, generar consulta con el √°rea de Recaudaci√≥n." } },
            { clave: "160", nombre: "INHABILITACI√ìN POR SALDO CERO", origen: "SAFRE", tipo: "OPERATIVA", plazo: "Indefinido", descripcion: "Cuando se apertura una cuenta y no se recibe aportaci√≥n en por lo menos 6 bimestres.", ti: { titulo: "ELIMINAR MARCA SAFRE", ruta: "Quiero pedir algo ¬ª Mesa de Servicios BackOffice Afore ¬ª UNE ¬ª Atenci√≥n al P√∫blico", imagen: "ofertamarca160.PNG" }, acciones: { CAT: "Sondear al trabajador si ha recibido aportaciones patronales posteriores al 1ro de Julio del 1997.", MSO: "Si el asesor indica que el trabajador tiene aportaciones pero no tiene saldo en la cuenta, se debe levantar un CRM.", UNE: "Si no hay saldo disponible, realizar an√°lisis para confirmar procedencia. Solicitar desmarque de la cuenta mediante un TI." } },
            { clave: "220", nombre: "TRASPASO AFORE CEDENTE", origen: "SAFRE", tipo: "OPERATIVA", plazo: "1 semana", descripcion: "Esta marca se coloca cuando la cuenta se encuentra en proceso de Traspaso a otra Afore.", acciones: { CAT: "Sin acci√≥n a seguir, mencionar al trabajador que su cuenta se encuentra en un proceso de traspaso hacia a otra Afore.", MSO: "Sin acci√≥n a seguir, trabajador se encuentra en proceso de traspaso.", UNE: "Sin acci√≥n a seguir, mencionar al trabajador que su cuenta se encuentra en un proceso de traspaso hacia a otra Afore." } },
            { clave: "234", nombre: "ANUALIDADES GARANTIZADAS", origen: "SAFRE", tipo: "INFORMATIVA", plazo: "Duraci√≥n del Cr√©dito", descripcion: "Se Marca cuando el trabajador cuenta con cr√©dito de vivienda y queda hasta que haya terminado el cr√©dito." },
            { clave: "235", nombre: "PROCESO DE ANUALIDADES GARANTIZADAS", origen: "SAFRE", tipo: "OPERATIVA", plazo: "1 Mes", descripcion: "Se coloca cuando el instituto lo notifica y dura aproximadamente un mes.", acciones: { CAT: "Sin acci√≥n a seguir, mencionar al trabajador que su cuenta se encuentra en un proceso Operativo con el instituto de Vivienda.", MSO: "Sin acci√≥n a seguir, trabajador se encuentra en proceso con el instituto de Vivienda.", UNE: "Sin acci√≥n a seguir, mencionar al trabajador que su cuenta se encuentra en un proceso Operativo con el instituto de Vivienda." } },
            { clave: "238", nombre: "TRANSFERENCIA ACREDITADOS FOVISSSTE", origen: "SAFRE", tipo: "OPERATIVA", plazo: "Duraci√≥n del Cr√©dito", descripcion: "Se coloca cuando el instituto lo notifica. Dirigir al trabajador a FOVISSSTE.", acciones: { CAT: "Sin informaci√≥n proporcionada.", MSO: "Sin informaci√≥n proporcionada.", UNE: "Sin informaci√≥n proporcionada." } },
            { clave: "239", nombre: "ACREDITADOS FOVISSSTE SALDO EN GARANT√çA", origen: "SAFRE", tipo: "OPERATIVA", plazo: "Indefinido", descripcion: "Se coloca cuando el trabajador cuenta con cr√©dito de vivienda.", acciones: { CAT: "En caso de que el trabajador quiera realizar un servicio y presente la marca, levantar aclaraci√≥n mediante CRM.", MSO: "En caso de no convivir con alg√∫n servicio, levantar CRM para aclaraci√≥n de la marca.", UNE: "Levantar consulta con el √°rea de Traspasos A-A para validar si la marca es correcta." } },
            { clave: "243", nombre: "UNIFICACI√ìN EXTRA-AFORE", origen: "SAFRE", tipo: "OPERATIVA", plazo: "30 d√≠as h√°biles", descripcion: "Se coloca cuando el trabajador est√° en proceso de Unificaci√≥n y la otra cuenta se encuentra ‚ÄúX‚Äù Administradora.", acciones: { CAT: "Validar si ya se cumpli√≥ el plazo normativo, en caso de ser as√≠, levantar folio CRM solicitando status.", MSO: "Validar si ya se cumpli√≥ el plazo normativo, en caso de ser as√≠, levantar folio CRM solicitando status.", UNE: "Validar status de la unificaci√≥n en SICI, realizar la consulta o aclaraci√≥n correspondiente." } },
            { clave: "250", nombre: "TRASPASO DE ICEFAS", origen: "SAFRE", tipo: "OPERATIVA", plazo: "60 d√≠as h√°biles", descripcion: "Se coloca cuando el trabajador realiza un servicio de traspaso de ICEFAS IMSS.", acciones: { CAT: "Validar si ya se cumpli√≥ el plazo normativo, en caso de ser as√≠, levantar folio CRM solicitando el desmarque.", MSO: "Validar si ya se cumpli√≥ el plazo normativo, en caso de ser as√≠, levantar folio CRM solicitando el desmarque.", UNE: "Validar si ya se cumpli√≥ el plazo normativo, en caso de ser as√≠, solicitar el desmarque con el √°rea de Traspasos A-A." } },
            { clave: "255", nombre: "IDENTIFICACI√ìN POR EDAD", origen: "SAFRE", tipo: "INFORMATIVA", plazo: "3 Meses", descripcion: "Se coloca cuando inicia el proceso de transferencia anual por Edad." },
            { clave: "256", nombre: "TRANSFERENCIA SB 90", origen: "SAFRE", tipo: "OPERATIVA", plazo: "Indefinido", descripcion: "Cambio de r√©gimen a la SB 90 y Transferencia de Recursos.", acciones: { CAT: "En caso de que el trabajador quiera realizar un servicio y presente la marca, levantar aclaraci√≥n CRM.", MSO: "En caso de no convivir con el servicio deseado es necesario levantar CRM para aclaraci√≥n.", UNE: "En caso de no convivir con el servicio deseado es necesario levantar consulta con Operaciones." } },
            { clave: "258", nombre: "TRANSFERENCIA FONDO BIENESTAR", origen: "SAFRE", tipo: "OPERATIVA", plazo: "Indefinido", descripcion: "Se coloca cuando se realiza la Transferencia de Recursos al FONDO BIENESTAR", proceso: "<h3>üìë 1. Casos que S√ç atendemos en Afore (CRM)</h3><p>Procedemos a realizar la solicitud de devoluci√≥n generando el CRM:</p><ul><li>Proceso de Unificaci√≥n de cuentas. üìÇ</li><li>Separaci√≥n de cuentas. ‚úÇÔ∏è</li><li>Tr√°mite Judicial en curso. ‚öñÔ∏è</li></ul><h3>üèõÔ∏è 2. Casos gestionados por el Instituto</h3><ul><li>Si el trabajador ya tiene resoluci√≥n: El Instituto detona la devoluci√≥n autom√°ticamente. ‚úÖ</li><li>Si NO tiene resoluci√≥n: Dirigir al trabajador al Instituto correspondiente. üö©</li></ul>", acciones: { CAT: "Sondear al trabajador si ya realiz√≥ la solicitud de devoluci√≥n. En caso negativo, canalizarlo a ventanilla.", MSO: "Si la devoluci√≥n de todas las subcuentas ya ha sido efectuada, se debe generar un folio CRM para solicitar el desmarque.", UNE: "Validar si ya se realiz√≥ la devoluci√≥n de los saldos en subcuentas. De ser as√≠, solicitar desmarque con Traspasos A-A." } },
            { clave: "260", nombre: "TRASPASO SAR ISSSTE", origen: "SAFRE", tipo: "OPERATIVA", plazo: "30 d√≠as h√°biles", descripcion: "Se coloca cuando el trabajador realiza un servicio de traspaso de ICEFAS ISSSTE.", acciones: { CAT: "Validar si ya se cumpli√≥ el plazo normativo, en caso de ser as√≠, levantar folio CRM solicitando el desmarque.", MSO: "Validar si ya se cumpli√≥ el plazo normativo, en caso de ser as√≠, levantar folio CRM solicitando el desmarque.", UNE: "Validar si ya se cumpli√≥ el plazo normativo, en caso de ser as√≠, solicitar el desmarque con el √°rea de Traspasos A-A." } },
            { clave: "261", nombre: "UNIFICACI√ìN ISSSTE MIXTA", origen: "SAFRE", tipo: "OPERATIVA", plazo: "30 d√≠as h√°biles", descripcion: "Se coloca en el proceso de Unificaci√≥n Mixta.", acciones: { CAT: "Validar si ya se cumpli√≥ el plazo normativo, en caso de ser as√≠, levantar folio CRM solicitando status.", MSO: "Validar si ya se cumpli√≥ el plazo normativo, en caso de ser as√≠, levantar folio CRM solicitando status.", UNE: "Validar status de la unificaci√≥n en SICI, realizar la consulta o aclaraci√≥n correspondiente." } },
            { clave: "263", nombre: "AN√ÅLISIS UNIFICACI√ìN MIXTA", origen: "SAFRE", tipo: "OPERATIVA", plazo: "30 d√≠as h√°biles", descripcion: "Parte del proceso de la Unificaci√≥n Mixta.", acciones: { CAT: "Validar si ya se cumpli√≥ el plazo normativo, en caso de ser as√≠, levantar folio CRM solicitando status.", MSO: "Validar si ya se cumpli√≥ el plazo normativo, en caso de ser as√≠, levantar folio CRM solicitando status.", UNE: "Validar status de la unificaci√≥n en SICI, realizar la consulta o aclaraci√≥n correspondiente." } },
            { clave: "264", nombre: "UNIFICACI√ìN IMSS-ISSSTE UNIFICADO", origen: "SAFRE", tipo: "OPERATIVA", plazo: "30 d√≠as h√°biles", descripcion: "Parte del proceso de la Unificaci√≥n Mixta / Liquidaci√≥n.", acciones: { CAT: "Validar si ya se cumpli√≥ el plazo normativo, en caso de ser as√≠, levantar folio CRM solicitando status.", MSO: "Validar si ya se cumpli√≥ el plazo normativo, en caso de ser as√≠, levantar folio CRM solicitando status.", UNE: "Validar status de la unificaci√≥n en SICI, realizar la consulta o aclaraci√≥n correspondiente." } },
            { clave: "265", nombre: "UNIFICACI√ìN IMSS-ISSSTE UNIFICADOR", origen: "SAFRE", tipo: "OPERATIVA", plazo: "30 d√≠as h√°biles", descripcion: "Parte del proceso de la Unificaci√≥n Mixta / Liquidaci√≥n.", acciones: { CAT: "Validar si ya se cumpli√≥ el plazo normativo, en caso de ser as√≠, levantar folio CRM solicitando status.", MSO: "Validar si ya se cumpli√≥ el plazo normativo, en caso de ser as√≠, levantar folio CRM solicitando status.", UNE: "Validar status de la unificaci√≥n en SICI, realizar la consulta o aclaraci√≥n correspondiente." } },
            { clave: "268", nombre: "CANDIDATO DE UNIFICACI√ìN MIXTA", origen: "SAFRE", tipo: "OPERATIVA", plazo: "Indefinido", descripcion: "Se identifica CURP duplicada en BDSAR. Se finaliza cuando el trabajador realiza el servicio.", pdf: { titulo: "Unificaci√≥n de Cuentas MIXTA.pdf", enlace: "Unificaci√≥n de Cuentas MIXTA.pdf" }, proceso: "<div class='proceso-highlight font-bold mb-4 text-blue-900 dark:text-blue-200'>üìå Para acci√≥n a seguir UNE/GAP</div><p>Resumen estructurado sobre Unificaci√≥n de Cuentas MIXTA:</p><h3>üìÇ Tipos de Unificaci√≥n</h3><ul><li>Misma persona con CURP duplicada en BDNSAR (PROCESAR).</li><li>MIXTA ISSSTE - IMSS: Registro por CURP en ISSSTE y NSS.</li><li>MIXTA REGISTRO POR CURP: Registro NTI en otra administradora o la misma Afore, y registro de NSS.</li></ul><h3>üîç Candidato a Unificaci√≥n MIXTA</h3><ul><li>Debe contar con la MARCA en Consulta 0101 de PROCESAR.</li><li>Campo CURPDUPLICADO debe tener el indicador 1.</li><li>Campos estatusexpedientes y estatusenrolamiento en tr√°nsito (03 - 03).</li></ul><h3>üìä Estatus en EIMAESTRO</h3><ul><li>El campo ESTATUS debe ser 1=TR√ÅNSITO.</li></ul><h3>üö© Escenarios</h3><ul><li>Escenario 1: Si NSS registrado en otra administradora, acudir all√°.</li><li>Escenario 2: D√©cimo Transitorio, acudir a PENSIONISSSTE.</li><li>Escenario 3: Sin expedientes, realizar alta primero.</li></ul><div class='proceso-highlight mt-4 border-l-4 border-blue-600'><p>üõ†Ô∏è Correcci√≥n: Si concluy√≥ y sigue marcado (NTI vigente en afop_cuota_diaria), solicitar marca 130 INHABILITACI√ìN POR UNIFI.</p></div>", acciones: { CAT: "Generar una consulta en el CRM para la aclaraci√≥n de la marca operativa.", MSO: "Es necesario iniciar el proceso de Unificaci√≥n Mixta, en caso de no permitirlo levantar folio CRM.", UNE: "Realizar el an√°lisis de la cuenta para validar si es candidato. Realizar consultas correspondientes. (Ver Manual PDF adjunto)." } },
            { clave: "280", nombre: "SEPARACI√ìN DE CUENTAS", origen: "SAFRE", tipo: "OPERATIVA", plazo: "30 d√≠as h√°biles", descripcion: "Separaci√≥n IMSS por cuenta compartida.", acciones: { CAT: "Validar si ya se cumpli√≥ el plazo normativo, en caso de ser as√≠, levantar consulta CRM.", MSO: "Validar si ya se cumpli√≥ el plazo normativo, en caso de ser as√≠, levantar consulta CRM.", UNE: "En caso de haberse cumplido el tiempo normativo, solicitar el desmarque con el √°rea de Separaci√≥n." } },
            { clave: "294", nombre: "TRASPASO ENTIDAD VERIFICADORA", origen: "SAFRE", tipo: "OPERATIVA", plazo: "1 semana", descripcion: "Solicitud de traspaso cedente del trabajador.", acciones: { CAT: "Sin acci√≥n a seguir, mencionar al trabajador que su cuenta se encuentra en un proceso de traspaso.", MSO: "Sin acci√≥n a seguir, trabajador se encuentra en proceso de traspaso.", UNE: "Sin acci√≥n a seguir, mencionar al trabajador que su cuenta se encuentra en un proceso de traspaso." } },
            { clave: "301", nombre: "TES RCV", origen: "SAFRE", tipo: "OPERATIVA", plazo: "2 d√≠as h√°biles", descripcion: "La marca 301 se coloca cuando la cuenta participa en la transferencia entre SIEFORE.", proceso: "<h3>üîÑ Proceso de Transferencia (SIEFORE)</h3><p>Optimizaci√≥n de rentabilidad moviendo activos seg√∫n estrategia de edad.</p>", acciones: { CAT: "Sin acci√≥n a seguir, informar que su cuenta est√° participando en un proceso de transferencia entre SIEFORES.", MSO: "Sin acci√≥n a seguir, la cuenta del trabajador se encuentra en transferencia entre SIEFORES.", UNE: "Sin acci√≥n a seguir, informar que su cuenta est√° participando en un proceso de transferencia entre SIEFORES." } },
            { clave: "307", nombre: "TES SAR92", origen: "SAFRE", tipo: "OPERATIVA", plazo: "2 d√≠as h√°biles", descripcion: "Participa en transferencia entre SIEFORE.", proceso: "<h3>üîÑ Proceso de Transferencia (SIEFORE)</h3><p>Optimizaci√≥n de ahorros seg√∫n perfil de edad.</p>", acciones: { CAT: "Sin acci√≥n a seguir.", MSO: "Sin acci√≥n a seguir.", UNE: "Sin acci√≥n a seguir." } },
            { clave: "308", nombre: "TES AAR92", origen: "SAFRE", tipo: "OPERATIVA", plazo: "2 d√≠as h√°biles", descripcion: "Participa en transferencia entre SIEFORE.", proceso: "<h3>üîÑ Proceso de Transferencia (SIEFORE)</h3><p>Optimizaci√≥n de ahorros seg√∫n perfil de edad.</p>", acciones: { CAT: "Sin acci√≥n a seguir.", MSO: "Sin acci√≥n a seguir.", UNE: "Sin acci√≥n a seguir." } },
            { clave: "310", nombre: "TES ISSS", origen: "SAFRE", tipo: "OPERATIVA", plazo: "2 d√≠as h√°biles", descripcion: "Participa en transferencia entre SIEFORE.", proceso: "<h3>üîÑ Proceso de Transferencia (SIEFORE)</h3><p>Optimizaci√≥n de ahorros seg√∫n perfil de edad.</p>", acciones: { CAT: "Sin acci√≥n a seguir.", MSO: "Sin acci√≥n a seguir.", UNE: "Sin acci√≥n a seguir." } },
            { clave: "329", nombre: "POSIBLE DUPLICADO", origen: "SAFRE", tipo: "INFORMATIVA", plazo: "Indefinido", descripcion: "Rechazo en certificaci√≥n por duplicidad de huellas." },
            { clave: "330", nombre: "POSIBLE DUPLICADO ACLARACIONES", origen: "SAFRE", tipo: "OPERATIVA", plazo: "Indefinido", descripcion: "Duplicado confirmado en BDNSAR.", acciones: { CAT: "Levantar consulta para validar marca o brindar acci√≥n.", MSO: "Sin acci√≥n espec√≠fica.", UNE: "Sin acci√≥n espec√≠fica." } },
            { clave: "489", nombre: "REINT. RETIRO PARCIAL NO COBRADO", origen: "SAFRE", tipo: "OPERATIVA", plazo: "Indefinido", descripcion: "Reintegro tras 6 meses sin cobro.", acciones: { CAT: "Generar caso en folio CRM para aclaraci√≥n.", MSO: "Generar caso en folio CRM para aclaraci√≥n.", UNE: "Levantar consulta con Retiros Parciales para desmarque." } },
            { clave: "490", nombre: "RETIRO APORTACIONES VOLUNTARIAS", origen: "SAFRE", tipo: "OPERATIVA", plazo: "5 d√≠as h√°biles", descripcion: "Trabajador inicia servicio de retiro de aportaciones voluntarias.", proceso: "<h3>üí∞ Servicio de Retiro Voluntario</h3><ul><li>ü™™ ID Vigente.</li><li>üß¨ Expediente Bio.</li><li>üìù Solicitud formal.</li></ul>", acciones: { CAT: "Validar plazo normativo. Consultar estatus. Si no se localiza, levantar CRM.", MSO: "Validar plazo normativo. Si se cumpli√≥, levantar consulta CRM para desmarque.", UNE: "Si se cumpli√≥ el tiempo normativo, solicitar desmarque con Retiros Parciales." } },
            { clave: "590", nombre: "SEPARACI√ìN ASOCIADO", origen: "SAFRE", tipo: "OPERATIVA", plazo: "30 d√≠as h√°biles", descripcion: "Separaci√≥n IMSS. Distintivo del NSS (NO RECLAMANTE).", acciones: { CAT: "Informar proceso de separaci√≥n y levantar CRM para estatus.", MSO: "Sin acci√≥n espec√≠fica.", UNE: "Sin acci√≥n espec√≠fica." } },
            { clave: "600", nombre: "MODIFICACIONES AFILIACI√ìN", origen: "SAFRE", tipo: "OPERATIVA", plazo: "No deber√≠a existir", descripcion: "Se coloca al iniciar Modificaci√≥n de Datos.", acciones: { CAT: "Generar consulta CRM para solicitar desmarque.", MSO: "Generar consulta CRM para solicitar desmarque.", UNE: "Solicitar desmarque de la cuenta mediante un TI." } },
            { clave: "601", nombre: "MODIFICACI√ìN DATOS NO PRESENCIAL", origen: "SAFRE", tipo: "INFORMATIVA", plazo: "Indefinido", descripcion: "Modificaci√≥n de dato no certificable." },
            { clave: "700", nombre: "57 A 59 A√ëOS", origen: "SAFRE", tipo: "INFORMATIVA", plazo: "Indefinido", descripcion: "Trabajador cuenta con edad de 57 a 59 a√±os." },
            { clave: "701", nombre: "60 A√ëOS O M√ÅS", origen: "SAFRE", tipo: "INFORMATIVA", plazo: "Indefinido", descripcion: "Trabajador cumple 60 a√±os." },
            { clave: "703", nombre: "65 A√ëOS O M√ÅS SAR 92", origen: "SAFRE", tipo: "INFORMATIVA", plazo: "Indefinido", descripcion: "Trabajador cumple 65 a√±os o m√°s." },
            { clave: "810", nombre: "TRANS.GOB.FED. PENSI√ìN IMSS", origen: "SAFRE", tipo: "OPERATIVA", plazo: "3 d√≠as h√°biles", descripcion: "En proceso de transferencia al Gobierno Federal.", acciones: { CAT: "Validar plazo. Levantar consulta CRM.", MSO: "Validar plazo. Levantar consulta CRM.", UNE: "Si cumpli√≥ tiempo, solicitar desmarque a Retiros Totales." } },
            { clave: "819", nombre: "DEVOLUCI√ìN VIVIENDA", origen: "SAFRE", tipo: "OPERATIVA", plazo: "15 d√≠as h√°biles", descripcion: "Tr√°mite de retiro iniciado en Infonavit.", acciones: { CAT: "Validar plazo. Levantar consulta CRM.", MSO: "Validar plazo. Levantar consulta CRM.", UNE: "Si cumpli√≥ tiempo, solicitar desmarque a Retiros Totales." } },
            { clave: "820", nombre: "NEGATIVA PENSI√ìN", origen: "SAFRE", tipo: "OPERATIVA", plazo: "6 d√≠as h√°biles", descripcion: "Disposici√≥n por Negativa de Pensi√≥n.", acciones: { CAT: "Verificar plazo. Consultar estatus. Iniciar CRM si no se localiza.", MSO: "Verificar plazo. Levantar CRM si expir√≥.", UNE: "Si rechazado y cumpli√≥ tiempo, solicitar desmarque a Retiros Totales." } },
            { clave: "830", nombre: "PENSI√ìN AUTORIZADA IMSS", origen: "SAFRE", tipo: "OPERATIVA", plazo: "6 d√≠as h√°biles", descripcion: "Disposici√≥n por Pensi√≥n Autorizada IMSS.", acciones: { CAT: "Verificar plazo. Consultar estatus. Iniciar CRM si no se localiza.", MSO: "Verificar plazo. Levantar CRM si expir√≥.", UNE: "Si rechazado y cumpli√≥ tiempo, solicitar desmarque a Retiros Totales." } },
            { clave: "841", nombre: "PENSI√ìN GARANTIZADA", origen: "SAFRE", tipo: "OPERATIVA", plazo: "Indefinido", descripcion: "Contrato por Pensi√≥n Garantizada hasta agotar saldo.", acciones: { CAT: "Validar fecha inicio. Si tras un mes no hay pagos, generar CRM.", MSO: "Sin informaci√≥n proporcionada.", UNE: "Sin informaci√≥n proporcionada." } },
            { clave: "850", nombre: "DISP/BENEF. JFCA", origen: "SAFRE", tipo: "OPERATIVA", plazo: "6 d√≠as h√°biles", descripcion: "Disposici√≥n tras laudo judicial.", acciones: { CAT: "Notificar proceso judicial. Contactar representante legal.", MSO: "Sin acci√≥n.", UNE: "Sin acci√≥n." } },
            { clave: "851", nombre: "RET. NEG. PEN. ISSSTE", origen: "SAFRE", tipo: "OPERATIVA", plazo: "6 d√≠as h√°biles", descripcion: "Disposici√≥n Negativa Pensi√≥n ISSSTE.", acciones: { CAT: "Verificar plazo. Iniciar CRM si no se localiza.", MSO: "Verificar plazo. Levantar CRM si expir√≥.", UNE: "Si rechazado y cumpli√≥ tiempo, solicitar desmarque." } },
            { clave: "852", nombre: "RET. PEN. AUT. ISSSTE", origen: "SAFRE", tipo: "OPERATIVA", plazo: "6 d√≠as h√°biles", descripcion: "Disposici√≥n Pensi√≥n Autorizada ISSSTE.", acciones: { CAT: "Verificar plazo. Iniciar CRM si no se localiza.", MSO: "Verificar plazo. Levantar CRM si expir√≥.", UNE: "Si rechazado y cumpli√≥ tiempo, solicitar desmarque." } },
            { clave: "853", nombre: "RET. PPP ISSSTE", origen: "SAFRE", tipo: "OPERATIVA", plazo: "6 d√≠as h√°biles", descripcion: "Disposici√≥n Plan Privado ISSSTE.", acciones: { CAT: "Verificar plazo. Iniciar CRM si no se localiza.", MSO: "Verificar plazo. Levantar CRM si expir√≥.", UNE: "Si rechazado y cumpli√≥ tiempo, solicitar desmarque." } },
            { clave: "855", nombre: "RET. AMP. EDAD ISSSTE", origen: "SAFRE", tipo: "OPERATIVA", plazo: "6 d√≠as h√°biles", descripcion: "Disposici√≥n por edad ISSSTE.", acciones: { CAT: "Verificar plazo. Iniciar CRM si no se localiza.", MSO: "Verificar plazo. Levantar CRM si expir√≥.", UNE: "Si rechazado y cumpli√≥ tiempo, solicitar desmarque." } },
            { clave: "860", nombre: "DISP. AMPARO EDAD IMSS", origen: "SAFRE", tipo: "OPERATIVA", plazo: "6 d√≠as h√°biles", descripcion: "Disposici√≥n por edad IMSS.", acciones: { CAT: "Verificar plazo. Iniciar CRM si no se localiza.", MSO: "Verificar plazo. Levantar CRM si expir√≥.", UNE: "Si rechazado y cumpli√≥ tiempo, solicitar desmarque." } },
            { clave: "870", nombre: "RET. PARCIAL MATRIMONIO", origen: "SAFRE", tipo: "OPERATIVA", plazo: "5 d√≠as h√°biles", descripcion: "Retiro Parcial Matrimonio.", acciones: { CAT: "Validar plazo. Consultar estatus. Levantar CRM.", MSO: "Validar plazo. Levantar CRM para desmarque.", UNE: "Si cumpli√≥ tiempo, solicitar desmarque." } },
            { clave: "875", nombre: "RETIRO PARCIAL DESEMPLEO", origen: "SAFRE", tipo: "OPERATIVA", plazo: "5 d√≠as h√°biles", descripcion: "Disposici√≥n por Desempleo IMSS.", acciones: { CAT: "Validar plazo. Consultar estatus. Levantar CRM.", MSO: "Validar plazo. Levantar consulta CRM.", UNE: "Si cumpli√≥ tiempo, solicitar desmarque." } },
            { clave: "880", nombre: "DISP. REC. REINGRESO", origen: "SAFRE", tipo: "OPERATIVA", plazo: "10 d√≠as h√°biles", descripcion: "Disposici√≥n post-pensi√≥n IMSS.", acciones: { CAT: "Verificar plazo. Iniciar CRM si no se localiza.", MSO: "Verificar plazo. Levantar CRM si expir√≥.", UNE: "Si rechazado y cumpli√≥ tiempo, solicitar desmarque." } },
            { clave: "921", nombre: "CONSULTA SALDO PREVIO", origen: "SAFRE", tipo: "OPERATIVA", plazo: "30 d√≠as h√°biles", descripcion: "En proceso de pensi√≥n.", query: "select F_RESPUESTA_A_PROCESAR, FECHA_VENCIMIENTO, ESTADO_SOLICITUD, * from ret_solicitud_saldo where nss=''", servidor: "SAFRE", acciones: { CAT: "Validar plazo. Levantar CRM para desmarque.", MSO: "Verificar FECHA_VENCIMIENTO. Si expir√≥, solicitar desmarque CRM.", UNE: "Verificar FECHA_VENCIMIENTO. Solicitar desmarque al otorgamiento." } },
            { clave: "922", nombre: "MARCA DE REINVERSI√ìN", origen: "SAFRE", tipo: "OPERATIVA", plazo: "2 d√≠as h√°biles", descripcion: "Reinversi√≥n tras Saldo Previo.", acciones: { CAT: "Validar plazo. Levantar CRM.", MSO: "Validar plazo. Levantar CRM.", UNE: "Si cumpli√≥ tiempo, solicitar desmarque." } },
            { clave: "924", nombre: "CUENTA TR√ÅMITE JUDICIAL", origen: "SAFRE", tipo: "OPERATIVA", plazo: "Indefinido", descripcion: "Demanda ante la JFCA.", acciones: { CAT: "Mencionar proceso judicial. Contactar representante legal.", MSO: "Sin informaci√≥n.", UNE: "Sin informaci√≥n." } },
            { clave: "925", nombre: "CONCILIACI√ìN VIVIENDA", origen: "SAFRE", tipo: "OPERATIVA", plazo: "Indefinido", descripcion: "Oficio CONSAR por INFONAVIT.", acciones: { CAT: "Sin informaci√≥n.", MSO: "Sin informaci√≥n.", UNE: "Sin informaci√≥n." } },
            { clave: "926", nombre: "ACLARACI√ìN CUENTA UEAP", origen: "SAFRE", tipo: "OPERATIVA", plazo: "Indefinido", descripcion: "Revisi√≥n por Unidad Especializada.", acciones: { CAT: "Levantar consulta CRM para aclaraci√≥n.", MSO: "Levantar consulta CRM para aclaraci√≥n.", UNE: "Validar √©xito de Separaci√≥n. Enviar evidencias a UNE." } },
            { clave: "930", nombre: "RETIRO PROCESO PAGO", origen: "SAFRE", tipo: "INFORMATIVA", plazo: "30 d√≠as", descripcion: "Rechazo de pago por CLABE." },
            { clave: "950", nombre: "ALTA EI Y BIO", origen: "SAFRE", tipo: "OPERATIVA", plazo: "No debe existir", descripcion: "Alta de Expediente de Identificaci√≥n.", acciones: { CAT: "Generar consulta CRM para desmarque.", MSO: "Generar consulta CRM para desmarque.", UNE: "Solicitar desmarque v√≠a TI." } },
            { clave: "960", nombre: "CANDIDATO RE ENROLAMIENTO", origen: "SAFRE", tipo: "OPERATIVA", plazo: "Indefinido", descripcion: "Candidato por contingente.", acciones: { CAT: "Levantar consulta para validar marca.", MSO: "Sin acci√≥n.", UNE: "Sin acci√≥n." } },
            { clave: "1270", nombre: "UNI INTRA-AFORE OP25", origen: "SAFRE", tipo: "OPERATIVA", plazo: "N/A", descripcion: "Notificaci√≥n Op.25 posibles cuentas a unificar.", query: "select fecha_actualiza, nss, curp, universo from umi_det_solicitud where curp in('')", servidor: "SAFRE", acciones: { CAT: "CRM para aclaraci√≥n.", MSO: "CRM para aclaraci√≥n.", UNE: "Verificar Universo. Plazo 30 d√≠as. Si excede, Unificaci√≥n." } },
            { clave: "1274", nombre: "ALERTA TERCEROS INF", origen: "SAFRE", tipo: "INFORMATIVA", plazo: "Indefinido", descripcion: "Alertas Procesar beneficiarios reincidentes." },
            { clave: "1275", nombre: "VALIDACI√ìN TERCEROS OPE", origen: "SAFRE", tipo: "OPERATIVA", plazo: "Indefinido", descripcion: "Bloqueo por retiro total de beneficiario.", acciones: { CAT: "Mencionar intento retiro. CRM aclaraci√≥n.", MSO: "Sin informaci√≥n.", UNE: "Sin informaci√≥n." } },

            // --- PROCESAR ---
            { clave: "N/A", nombre: "RETIROS DATAMART BENEFICIARIO", origen: "PROCESAR", tipo: "INFORMATIVA", plazo: "Indefinido", descripcion: "Beneficiario con derecho otorgado." },
            { clave: "N/A", nombre: "DERECHO A RETIRO", origen: "PROCESAR", tipo: "INFORMATIVA", plazo: "Indefinido", descripcion: "Trabajador con derecho otorgado." },
            { clave: "N/A", nombre: "MODIFICACI√ìN DATOS IMSS", origen: "PROCESAR", tipo: "INFORMATIVA", plazo: "Indefinido", descripcion: "Modificaci√≥n realizada en IMSS." },
            { clave: "N/A", nombre: "RETIRO PARCIAL IMSS CONCILIACI√ìN", origen: "PROCESAR", tipo: "OPERATIVA", plazo: "20 d√≠as", descripcion: "Diagn√≥stico rechazo J62 salario base.", acciones: { CAT: "Sin informaci√≥n.", MSO: "Sin informaci√≥n.", UNE: "Sin informaci√≥n." } },
            { clave: "N/A", nombre: "RETIROS PARCIALES REMOTOS", origen: "PROCESAR", tipo: "OPERATIVA", plazo: "5 d√≠as h√°biles", descripcion: "Retiro Parcial v√≠a App.", acciones: { CAT: "Validar plazo. CRM si no se localiza.", MSO: "Validar plazo. CRM desmarque.", UNE: "Si cumpli√≥ tiempo, solicitar desmarque." } },
            { clave: "N/A", nombre: "INDIVIDUAL REINGRESO", origen: "PROCESAR", tipo: "INFORMATIVA", plazo: "Indefinido", descripcion: "Sin descripci√≥n." },
            { clave: "N/A", nombre: "RETIRO ISSSTE DERECHO", origen: "PROCESAR", tipo: "INFORMATIVA", plazo: "Indefinido", descripcion: "Derecho retiro total ISSSTE." },
            { clave: "N/A", nombre: "SIEFORE B√ÅSICA PENSIONES", origen: "PROCESAR", tipo: "INFORMATIVA", plazo: "Indefinido", descripcion: "En SIEFORE B√°sica de Pensiones." },
            { clave: "N/A", nombre: "INDIVIDUAL NUEVO", origen: "PROCESAR", tipo: "INFORMATIVA", plazo: "Indefinido", descripcion: "Sin descripci√≥n." },
            { clave: "N/A", nombre: "TRABAJADOR ASIGNADO", origen: "PROCESAR", tipo: "OPERATIVA", plazo: "Indefinido", descripcion: "Se elimina tras registro de NSS.", acciones: { CAT: "Informar asignaci√≥n. Invitar registro.", MSO: "Invitar a realizar servicio de registro.", UNE: "Mencionar asignaci√≥n e invitar registro." } },
            { clave: "N/A", nombre: "TRASPASO AFORE-AFORE", origen: "PROCESAR", tipo: "OPERATIVA", plazo: "20 d√≠as h√°biles", descripcion: "En proceso de traspaso a otra Administradora.", acciones: { CAT: "Mencionar proceso traspaso.", MSO: "Sin acci√≥n.", UNE: "Mencionar proceso traspaso." } },
            { clave: "N/A", nombre: "TRASPASO LIQUIDACI√ìN", origen: "PROCESAR", tipo: "OPERATIVA", plazo: "Indefinido", descripcion: "Dentro del proceso de traspaso.", acciones: { CAT: "Levantar CRM aclaraci√≥n.", MSO: "Levantar CRM aclaraci√≥n.", UNE: "Levantar consulta Traspasos A-A." } },
            { clave: "N/A", nombre: "D√âCIMO TRANSITORIO ISSSTE", origen: "PROCESAR", tipo: "OPERATIVA", plazo: "6 d√≠as h√°biles", descripcion: "Disposici√≥n Negativa Pensi√≥n.", acciones: { CAT: "Verificar plazo. Iniciar CRM.", MSO: "Verificar plazo. CRM desmarque.", UNE: "Solicitar desmarque Retiros Totales." } },
            { clave: "N/A", nombre: "CR√âDITO ANUALIDADES", origen: "PROCESAR", tipo: "INFORMATIVA", plazo: "Indefinido", descripcion: "Cr√©dito Infonavit vigente." },
            { clave: "N/A", nombre: "CR√âDITO 43 BIS", origen: "PROCESAR", tipo: "INFORMATIVA", plazo: "Indefinido", descripcion: "Cr√©dito vivienda vigente." },
            { clave: "N/A", nombre: "UNIFICACI√ìN MIXTAS", origen: "PROCESAR", tipo: "OPERATIVA", plazo: "30 d√≠as h√°biles", descripcion: "Unificaci√≥n IMSS con ISSSTE.", acciones: { CAT: "Validar plazo. CRM estatus.", MSO: "Validar plazo. CRM estatus.", UNE: "Validar status en SICI." } },
            { clave: "N/A", nombre: "UNIFICACI√ìN ACTIVA ISSSTE", origen: "PROCESAR", tipo: "OPERATIVA", plazo: "30 d√≠as h√°biles", descripcion: "Unificaci√≥n otra Administradora.", acciones: { CAT: "Validar plazo. CRM estatus.", MSO: "Validar plazo. CRM estatus.", UNE: "Validar status en SICI." } },
            { clave: "N/A", nombre: "RETIROS PROGRAMADOS PRO", origen: "PROCESAR", tipo: "INFORMATIVA", plazo: "Indefinido", descripcion: "Resoluci√≥n Pensi√≥n Garantizada." },
            { clave: "N/A", nombre: "RECURSOS TOTALES PRO", origen: "PROCESAR", tipo: "OPERATIVA", plazo: "6 d√≠as h√°biles", descripcion: "En proceso retiro total.", acciones: { CAT: "Verificar plazo. Iniciar CRM.", MSO: "Verificar plazo. CRM desmarque.", UNE: "Solicitar desmarque Retiros Totales." } },
            { clave: "N/A", nombre: "PROCESO RETIRO PARCIAL PRO", origen: "PROCESAR", tipo: "OPERATIVA", plazo: "90/30 d√≠as", descripcion: "Retiro Parcial Desempleo IMSS.", query: "select * from ret_parcial where nss=''", servidor: "SAFRE", acciones: { CAT: "Validar estatus. CRM si rechazado.", MSO: "Verificar fecha + 3 d√≠as. CRM desmarque.", UNE: "Verificar fecha + 3 d√≠as. Desmarque parciales." } },
            { clave: "N/A", nombre: "SEPARACI√ìN CUENTAS PRO", origen: "PROCESAR", tipo: "OPERATIVA", plazo: "30 d√≠as h√°biles", descripcion: "Separaci√≥n IMSS.", acciones: { CAT: "Validar plazo. CRM estatus.", MSO: "Validar plazo. CRM estatus.", UNE: "Validar status en SICI." } },
            { clave: "N/A", nombre: "INFONAVIT TRADICIONAL", origen: "PROCESAR", tipo: "INFORMATIVA", plazo: "Duraci√≥n Cr√©dito", descripcion: "Cr√©dito vivienda vigente." },
            { clave: "N/A", nombre: "UNIFICACI√ìN IMSS PRO", origen: "PROCESAR", tipo: "OPERATIVA", plazo: "30 d√≠as h√°biles", descripcion: "Unificaci√≥n con otra Administradora.", acciones: { CAT: "Validar plazo. CRM estatus.", MSO: "Validar plazo. CRM estatus.", UNE: "Validar status en SICI." } },
            { clave: "N/A", nombre: "FONDO PENSI√ìN BIENESTAR PRO", origen: "PROCESAR", tipo: "OPERATIVA", plazo: "Indefinido", descripcion: "Transferencia al FONDO BIENESTAR.", proceso: "<h3>üìë 1. Casos CRM</h3><ul><li>Unificaci√≥n.</li><li>Separaci√≥n.</li><li>Tr√°mite Judicial.</li></ul>", acciones: { CAT: "Sondear devoluci√≥n. Si s√≠, estatus.", MSO: "Si devoluci√≥n efectuada, CRM desmarque.", UNE: "Validar subcuentas. Desmarque Traspasos A-A." } },
            { clave: "N/A", nombre: "VENTANILLA INFONAVIT PRO", origen: "PROCESAR", tipo: "OPERATIVA", plazo: "15 d√≠as h√°biles", descripcion: "Retiro iniciado en Infonavit.", acciones: { CAT: "Sin informaci√≥n.", MSO: "Sin informaci√≥n.", UNE: "Sin informaci√≥n." } },
            { clave: "N/A", nombre: "TRANSFERENCIA RECURSOS PRO", origen: "PROCESAR", tipo: "OPERATIVA", plazo: "5 d√≠as h√°biles", descripcion: "Transferencia al Gobierno Federal.", query: "SELECT FECHA_CARGA_AFORE, * FROM RET_DET_DATAMART WHERE NSS=''", servidor: "SAFRE", acciones: { CAT: "CRM para aclaraci√≥n.", MSO: "Validar 5 d√≠as desde FECHA_CARGA_AFORE. CRM.", UNE: "Solicitar desmarque otorgamiento." } },
            { clave: "N/A", nombre: "PROCESO SALDO PREVIO IMSS PRO", origen: "PROCESAR", tipo: "OPERATIVA", plazo: "30 d√≠as h√°biles", descripcion: "En proceso de pensi√≥n.", query: "select * from ret_solicitud_saldo where nss=''", servidor: "SAFRE", acciones: { CAT: "Validar plazo. CRM desmarque.", MSO: "Verificar fecha. CRM desmarque.", UNE: "Solicitar desmarque otorgamiento." } },
            { clave: "N/A", nombre: "VIVIENDA FOVISSSTE PRO", origen: "PROCESAR", tipo: "INFORMATIVA", plazo: "Duraci√≥n Cr√©dito", descripcion: "Dirigir a FOVISSSTE." },
            { clave: "N/A", nombre: "TJ INFONAVIT PRO", origen: "PROCESAR", tipo: "OPERATIVA", plazo: "Indefinido", descripcion: "Demanda judicial.", acciones: { CAT: "Sin informaci√≥n.", MSO: "Sin informaci√≥n.", UNE: "Sin informaci√≥n." } },
            { clave: "N/A", nombre: "TR√ÅMITE JUDICIAL IMSS PRO", origen: "PROCESAR", tipo: "OPERATIVA", plazo: "Indefinido", descripcion: "Demanda judicial.", acciones: { CAT: "Sin informaci√≥n.", MSO: "Sin informaci√≥n.", UNE: "Sin informaci√≥n." } },
            { clave: "N/A", nombre: "TRASPASOS SAR92 PRO", origen: "PROCESAR", tipo: "OPERATIVA", plazo: "60 d√≠as h√°biles", descripcion: "Traspaso ICEFAS IMSS.", acciones: { CAT: "Validar plazo. CRM desmarque.", MSO: "Validar plazo. CRM desmarque.", UNE: "Solicitar desmarque Traspasos A-A." } },
            { clave: "N/A", nombre: "TRASPASOS SARISSSTE PRO", origen: "PROCESAR", tipo: "OPERATIVA", plazo: "30 d√≠as h√°biles", descripcion: "Traspaso ICEFAS ISSSTE.", acciones: { CAT: "Validar plazo. CRM desmarque.", MSO: "Validar plazo. CRM desmarque.", UNE: "Solicitar desmarque Traspasos A-A." } },
            { clave: "N/A", nombre: "PROCESO SALDO PREVIO ISSSTE PRO", origen: "PROCESAR", tipo: "OPERATIVA", plazo: "30 d√≠as h√°biles", descripcion: "En proceso de pensi√≥n.", acciones: { CAT: "Sin informaci√≥n.", MSO: "Sin informaci√≥n.", UNE: "Sin informaci√≥n." } },
            { clave: "N/A", nombre: "TRANSFERENCIA ACREDITADOS PRO", origen: "PROCESAR", tipo: "INFORMATIVA", plazo: "Duraci√≥n Cr√©dito", descripcion: "Cr√©dito vivienda vigente." },
            { clave: "N/A", nombre: "FPB ART 37 PRO", origen: "PROCESAR", tipo: "INFORMATIVA", plazo: "Indefinido", descripcion: "Informativa sin afectaci√≥n." },
            { clave: "N/A", nombre: "FPB VIVIENDA PRO", origen: "PROCESAR", tipo: "INFORMATIVA", plazo: "Indefinido", descripcion: "Falta recuperar saldos Vivienda." }
        ];

        let activeQuery = '';

        function renderBrands(list) {
            const grid = document.getElementById('brands-grid');
            if (!grid) return;
            grid.innerHTML = '';
            list.forEach((brand) => {
                const card = document.createElement('div');
                card.className = "brand-card bg-white dark:bg-gray-800 rounded-3xl shadow-md border border-gray-100 dark:border-gray-700 overflow-hidden animate-fade";
                const isSafre = brand.origen === "SAFRE";
                const sourceColor = isSafre ? "bg-blue-100 text-blue-700 dark:bg-blue-900/40 dark:text-blue-300" : "bg-purple-100 text-purple-700 dark:bg-purple-900/40 dark:text-purple-300";
                const isInformativa = brand.tipo === "INFORMATIVA";
                const typeColor = isInformativa ? "bg-green-100 text-green-700 dark:bg-green-900/40 dark:text-green-300" : "bg-red-100 text-red-700 dark:bg-red-900/40 dark:text-red-300";
                const titleNum = (brand.clave && brand.clave !== "N/A") ? `<span class="text-blue-700 dark:text-yellow-500 mr-2 font-black">${brand.clave}</span>` : "";
                
                const qBtn = brand.query ? `<button onclick="openQueryModal('${brand.nombre}', \`${brand.query}\`, '${brand.servidor || 'SAFRE'}')" class="p-2 bg-blue-600 text-white rounded-xl pulse-query" title="Ver Query SQL"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M4 7v10c0 2.21 3.58 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.58 4 8 4s8-1.79 8-4M4 7c0-2.21 3.58-4 8-4s8 1.79 8 4m0 5c0 2.21-3.58 4-8 4s-8-1.79-8-4"></path></svg></button>` : "";
                const pBtn = brand.proceso ? `<button onclick="openProcesoModal('${brand.nombre}', \`${brand.proceso}\`)" class="p-2 bg-amber-500 text-white rounded-xl pulse-proceso" title="Ver Contexto"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path></svg></button>` : "";
                const tBtn = brand.ti ? `<button onclick="openTiModalByName('${brand.nombre}')" class="p-2 bg-indigo-600 text-white rounded-xl pulse-ti font-black text-[10px]">TI</button>` : "";
                const dBtn = brand.pdf ? `<button onclick="openPdfModalByName('${brand.nombre}')" class="p-2 bg-red-600 text-white rounded-xl pulse-pdf font-black text-[10px]">PDF</button>` : "";

                let actionHtml = '';
                if (brand.tipo === 'OPERATIVA' && brand.acciones) {
                    const sid = brand.nombre.replace(/[^a-zA-Z0-9]/g, '-');
                    actionHtml = `
                        <div class="mt-auto pt-4 border-t border-gray-100 dark:border-gray-700">
                            <div class="flex gap-1 mb-2 bg-gray-50 dark:bg-gray-900/50 p-1 rounded-xl">
                                <button onclick="switchArea(this, '${sid}', 'CAT', '${brand.nombre}')" class="area-tab active flex-1 py-1.5 text-[10px] font-bold rounded-lg transition-all">CAT</button>
                                <button onclick="switchArea(this, '${sid}', 'MSO', '${brand.nombre}')" class="area-tab flex-1 py-1.5 text-[10px] font-bold rounded-lg transition-all">MSO</button>
                                <button onclick="switchArea(this, '${sid}', 'UNE', '${brand.nombre}')" class="area-tab flex-1 py-1.5 text-[10px] font-bold rounded-lg transition-all">UNE/GAP</button>
                            </div>
                            <div class="bg-blue-50/50 dark:bg-blue-900/10 p-4 rounded-xl min-h-[100px] flex items-start border border-blue-100 dark:border-blue-900/30 overflow-y-auto">
                                <p id="action-text-${sid}" class="text-[11px] italic font-medium text-gray-700 dark:text-gray-200 animate-fade">"${brand.acciones.CAT}"</p>
                            </div>
                        </div>`;
                }

                card.innerHTML = `
                    <div class="p-5 flex-grow flex flex-col">
                        <div class="flex flex-wrap justify-between items-start gap-2 mb-3">
                            <div class="flex gap-2"><span class="text-[9px] font-black px-2 py-1 rounded-lg ${sourceColor} uppercase tracking-widest font-black">${brand.origen}</span><span class="text-[9px] font-black px-2 py-1 rounded-lg ${typeColor} uppercase tracking-widest font-black">${brand.tipo}</span></div>
                            <span class="text-[9px] font-bold text-gray-400 uppercase tracking-tighter">${brand.plazo}</span>
                        </div>
                        <div class="flex justify-between items-start gap-2 mb-2">
                            <h3 class="text-base font-bold text-blue-900 dark:text-yellow-400 leading-tight uppercase flex-grow">${titleNum}${brand.nombre}</h3>
                            <div class="flex gap-1">${qBtn}${pBtn}${tBtn}${dBtn}</div>
                        </div>
                        <p class="text-[11px] text-gray-600 dark:text-gray-400 leading-normal mb-4">${brand.descripcion}</p>
                        ${actionHtml}
                    </div>`;
                grid.appendChild(card);
            });
        }

        // Global functions
        window.openQueryModal = (n, q, s) => { activeQuery = q; document.getElementById('query-title').innerText = n; document.getElementById('query-text').innerText = q; document.getElementById('server-badge').innerText = `Servidor: ${s}`; const m = document.getElementById('query-modal'); m.classList.replace('hidden', 'flex'); setTimeout(() => { m.classList.add('opacity-100'); document.getElementById('query-modal-content').classList.replace('scale-95', 'scale-100'); }, 10); };
        window.openProcesoModal = (n, h) => { document.getElementById('proceso-title').innerText = n; document.getElementById('proceso-text').innerHTML = h; const m = document.getElementById('proceso-modal'); m.classList.replace('hidden', 'flex'); setTimeout(() => { m.classList.add('opacity-100'); document.getElementById('proceso-modal-content').classList.replace('scale-95', 'scale-100'); }, 10); };
        window.openTiModalByName = (n) => { const b = brandsData.find(x => x.nombre === n); if (!b?.ti) return; document.getElementById('ti-offer-name').innerText = b.ti.titulo; const parts = b.ti.ruta.split(' ¬ª '); document.getElementById('ti-path').innerHTML = parts.map((p, i) => `<span>${p}</span>${i < parts.length - 1 ? '<svg class="w-3 h-3 text-indigo-300" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M9 5l7 7-7 7"></path></svg>' : ''}`).join(''); document.getElementById('ti-image').src = b.ti.imagen; const m = document.getElementById('ti-modal'); m.classList.replace('hidden', 'flex'); setTimeout(() => { m.classList.add('opacity-100'); document.getElementById('ti-modal-content').classList.replace('scale-95', 'scale-100'); }, 10); };
        window.openPdfModalByName = (n) => { const b = brandsData.find(x => x.nombre === n); if (!b?.pdf) return; document.getElementById('pdf-manual-name').innerText = b.nombre; document.getElementById('pdf-download-link').href = b.pdf.enlace; const m = document.getElementById('pdf-modal'); m.classList.replace('hidden', 'flex'); setTimeout(() => { m.classList.add('opacity-100'); document.getElementById('pdf-modal-content').classList.replace('scale-95', 'scale-100'); }, 10); };
        window.closeModal = (id) => { const m = document.getElementById(id); const c = document.getElementById(id + '-content'); m.classList.remove('opacity-100'); c.classList.replace('scale-100', 'scale-95'); setTimeout(() => m.classList.replace('flex', 'hidden'), 300); };
        window.copyToClipboard = () => { const ta = document.createElement('textarea'); ta.value = activeQuery; document.body.appendChild(ta); ta.select(); document.execCommand('copy'); document.body.removeChild(ta); const btn = document.getElementById('copy-btn-text'); btn.innerText = '¬°Copiado!'; setTimeout(() => btn.innerText = 'Copiar Query', 2000); };
        window.switchArea = (btn, sid, a, name) => { btn.parentElement.querySelectorAll('button').forEach(x => x.classList.remove('active')); btn.classList.add('active'); const b = brandsData.find(x => x.nombre === name); const k = a === 'UNE' ? 'UNE' : a; document.getElementById(`action-text-${sid}`).innerHTML = `"${b.acciones[k]}"`; };

        window.addEventListener('DOMContentLoaded', () => {
            const authBtn = document.getElementById('auth-btn');
            const search = document.getElementById('search-input');

            authBtn.onclick = () => {
                const key = document.getElementById('access-key').value;
                if (key === 'GAP2024') {
                    document.getElementById('gatekeeper').classList.add('opacity-0');
                    setTimeout(() => {
                        document.getElementById('gatekeeper').style.display = 'none';
                        document.getElementById('app-content').classList.replace('hidden', 'block');
                        setTimeout(() => document.getElementById('app-content').classList.add('opacity-100'), 50);
                        renderBrands(brandsData);
                    }, 500);
                } else {
                    document.getElementById('auth-error').classList.remove('hidden');
                }
            };

            document.getElementById('toggle-dark').onclick = () => document.documentElement.classList.toggle('dark');
            search?.addEventListener('input', (e) => {
                const t = e.target.value.toLowerCase();
                const c = document.querySelector('.nav-button.active')?.dataset.cat || 'all';
                renderBrands(brandsData.filter(x => (x.nombre.toLowerCase().includes(t) || (x.clave && x.clave.toLowerCase().includes(t))) && (c === 'all' || x.tipo === c)));
            });

            document.querySelectorAll('.nav-button').forEach(b => {
                b.onclick = () => {
                    document.querySelectorAll('.nav-button').forEach(x => x.classList.remove('active'));
                    b.classList.add('active');
                    search.dispatchEvent(new Event('input'));
                };
            });
        });
    </script>
</body>
</html>